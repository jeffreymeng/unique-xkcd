(()=>{var c=(n,t)=>(n>>BigInt(t)&1n)!==0n;var i=()=>new Promise(n=>{chrome.storage.sync.get(["readComics"],({readComics:t})=>n(BigInt(t)))}),m=n=>new Promise(t=>{chrome.storage.sync.set({readComics:n.toString()},t)}),u=async n=>{let t=await i()|BigInt(n);return m(t)},a=async n=>u(1n<<BigInt(n)),d=n=>{let{host:t,pathname:e}=new URL(n);if(t!=="xkcd.com")return NaN;let o=e.match(/^\/(\d+)\/$/);return o?parseInt(o[0],10):NaN};var l=()=>{let n=d(window.location.href);if(!isNaN(n))return a(n)};l();var g=(n,t,e)=>{let o=Array(t-n+1).fill(0).map((r,s)=>s+n).filter(r=>!c(e,r));return o[o.length*Math.random()|0]},p=n=>{let t=[];for(let e of document.querySelectorAll(".comicNav")){let o=document.createElement("a");o.innerText=n,t.push(o);let r=document.createElement("li");r.appendChild(o);let s=e.querySelector("li:nth-child(4)");e.insertBefore(r,s)}return t},h=async()=>(await(await fetch("https://xkcd.com/info.0.json")).json()).num;(async()=>{let n=p("Random Unread"),t=g(1,await h(),await i());for(let e of n){if(t===void 0){e.href="",e.innerText="No Unread Comics";continue}e.href=`/${t}/`}})();})();
